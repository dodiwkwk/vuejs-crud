{"remainingRequest":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dodi/Documents/Course/Parsinta/LaraVue/note/src/views/notes/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/src/views/notes/Edit.vue","mtime":1603804835874},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/cache-loader/dist/cjs.js","mtime":1603807539473},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/babel-loader/lib/index.js","mtime":1603807539469},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/cache-loader/dist/cjs.js","mtime":1603807539473},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/vue-loader/lib/index.js","mtime":1603807946571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZvcm06IFtdLAogICAgICAgICAgICBzdWJqZWN0czogW10sCiAgICAgICAgICAgIG1lc3NhZ2VFcnJvcnM6IFtdLAogICAgICAgICAgICBzZWxlY3RlZDogJycsCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICAgICAgfQogICAgfSwKCiAgICBtb3VudGVkICgpIHsKICAgICAgICB0aGlzLmdldFN1YmplY3RzKCkKICAgICAgICB0aGlzLmdldE5vdGUoKQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgZ2V0U3ViamVjdHMoKSB7CiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9zdWJqZWN0cycpCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3RzID0gcmVzcG9uc2UuZGF0YQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgZ2V0Tm90ZSgpIHsKICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL25vdGVzLyR7dGhpcy4kcm91dGUucGFyYW1zLm5vdGVTbHVnfWApCiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgIH0sCgogICAgICAgIHNlbGVjdGVkU3ViamVjdChlKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBlLnRhcmdldC52YWx1ZQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHVwZGF0ZSgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmZvcm1bJ3N1YmplY3QnXSA9IHRoaXMuc2VsZWN0ZWQgfHwgdGhpcy5mb3JtLnN1YmplY3RfaWQKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBhdGNoKGAvYXBpL25vdGVzLyR7dGhpcy4kcm91dGUucGFyYW1zLm5vdGVTbHVnfS9lZGl0YCwgdGhpcy5mb3JtKQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3cocmVzcG9uc2UuZGF0YS5tZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL25vdGVzL3RhYmxlJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlRXJyb3JzID0gZS5yZXNwb25zZS5kYXRhLmVycm9ycwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/notes","sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">New Note</div>\n                    <div class=\"card-body\">\n                        <form action=\"#\" method=\"post\" @submit.prevent=\"update\"> \n                            <div class=\"form-group\">\n                                <label for=\"title\">Title</label>\n                                <input type=\"text\" v-model=\"form.title\" id=\"title\" class=\"form-control\">\n                                <div v-if=\"messageErrors.title\" class=\"mt-2 text-danger\">{{ messageErrors.title[0] }}</div>\n                            </div>\n\n                            <div class=\"form-group\">\n                                <label for=\"subject\">Subject</label>\n                                <select @change=\"selectedSubject\" name=\"subject\" id=\"subject\" class=\"form-control\">\n                                    <option :value=\"form.subject_id\" v-text=\"form.subject\"></option>\n                                    <template v-for=\"subject in subjects\">\n                                        <option v-if=\"form.subject_id !== subject.id\" :key=\"subject.id\" :value=\"subject.id\">\n                                            {{ subject.name }}\n                                        </option>\n                                    </template>    \n                                </select>\n                                <div v-if=\"messageErrors.subject\" class=\"mt-2 text-danger\">{{ messageErrors.subject[0] }}</div>\n                            </div>\n\n                            <div class=\"form-group\">\n                                <label for=\"description\">Description</label>\n                                <textarea v-model=\"form.description\" name=\"description\" id=\"description\" rows=\"5\" class=\"form-control\"></textarea>    \n                                <div v-if=\"messageErrors.description\" class=\"mt-2 text-danger\">{{ messageErrors.description[0] }}</div>\n                            </div> \n\n                            <button class=\"btn btn-primary d-flex align-items-center\" type=\"submit\">\n                                Update\n                                <template v-if=\"loading\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"margin: auto; background: none; display: block; shape-rendering: auto;\" width=\"30px\" height=\"20px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\"> <rect x=\"17.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#e3e5ea\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"18;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.2s\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"64;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.2s\"></animate> </rect> <rect x=\"42.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#cfdbf2\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"20.999999999999996;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.1s\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"58.00000000000001;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.1s\"></animate> </rect> <rect x=\"67.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#cde0ff\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"20.999999999999996;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"58.00000000000001;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\"></animate> </rect> </svg>\n                                </template>\n                            </button>\n                        </form>  \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data () {\n        return {\n            form: [],\n            subjects: [],\n            messageErrors: [],\n            selected: '',\n            loading: false\n        }\n    },\n\n    mounted () {\n        this.getSubjects()\n        this.getNote()\n    },\n\n    methods: {\n        async getSubjects() {\n            let response = await axios.get('/api/subjects')\n            if (response.status == 200) {\n                this.subjects = response.data\n            }\n        },\n\n        async getNote() {\n            let response = await axios.get(`/api/notes/${this.$route.params.noteSlug}`)\n            this.form = response.data.data\n        },\n\n        selectedSubject(e) {\n            this.selected = e.target.value\n        },\n\n        async update() {\n            this.loading = true\n            this.form['subject'] = this.selected || this.form.subject_id\n            try {\n                let response = await axios.patch(`/api/notes/${this.$route.params.noteSlug}/edit`, this.form)\n                if (response.status == 200) {\n                    this.$toasted.show(response.data.message, {\n                        type: 'success',\n                        duration: 3000\n                    })\n                    this.loading = false\n                this.$router.push('/notes/table')\n                }\n            } catch(e) {\n                this.loading = false\n                this.messageErrors = e.response.data.errors\n            }\n        }\n    }\n}\n</script>"]}]}