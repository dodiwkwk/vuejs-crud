{"remainingRequest":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dodi/Documents/Course/Parsinta/LaraVue/note/src/views/notes/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/src/views/notes/Edit.vue","mtime":1603848511806},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/cache-loader/dist/cjs.js","mtime":1603807539473},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/babel-loader/lib/index.js","mtime":1603807539469},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/cache-loader/dist/cjs.js","mtime":1603807539473},{"path":"/home/dodi/Documents/Course/Parsinta/LaraVue/note/node_modules/vue-loader/lib/index.js","mtime":1603807946571}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZm9ybTogW10sCiAgICAgICAgICAgIHN1YmplY3RzOiBbXSwKICAgICAgICAgICAgbWVzc2FnZUVycm9yczogW10sCiAgICAgICAgICAgIHNlbGVjdGVkOiAnJywKICAgICAgICAgICAgbG9hZGluZzogZmFsc2UKICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMuZ2V0U3ViamVjdHMoKQogICAgICAgIHRoaXMuZ2V0Tm90ZSgpCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBnZXRTdWJqZWN0cygpIHsKICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3N1YmplY3RzJykKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuc3ViamVjdHMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBhc3luYyBnZXROb3RlKCkgewogICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvbm90ZXMvJHt0aGlzLiRyb3V0ZS5wYXJhbXMubm90ZVNsdWd9YCkKICAgICAgICAgICAgdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgfSwKCiAgICAgICAgc2VsZWN0ZWRTdWJqZWN0KGUpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgdXBkYXRlKCkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZm9ybVsnc3ViamVjdCddID0gdGhpcy5zZWxlY3RlZCB8fCB0aGlzLmZvcm0uc3ViamVjdF9pZAogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucGF0Y2goYC9hcGkvbm90ZXMvJHt0aGlzLiRyb3V0ZS5wYXJhbXMubm90ZVNsdWd9L2VkaXRgLCB0aGlzLmZvcm0pCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwMAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbm90ZXMvdGFibGUnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvcnMgPSBlLnJlc3BvbnNlLmRhdGEuZXJyb3JzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/notes","sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">New Note</div>\n                    <div class=\"card-body\">\n                        <form action=\"#\" method=\"post\" @submit.prevent=\"update\"> \n                            <div class=\"form-group\">\n                                <label for=\"title\">Title</label>\n                                <input type=\"text\" v-model=\"form.title\" id=\"title\" class=\"form-control\">\n                                <div v-if=\"messageErrors.title\" class=\"mt-2 text-danger\">{{ messageErrors.title[0] }}</div>\n                            </div>\n\n                            <div class=\"form-group\">\n                                <label for=\"subject\">Subject</label>\n                                <select @change=\"selectedSubject\" name=\"subject\" id=\"subject\" class=\"form-control\">\n                                    <option :value=\"form.subject_id\" v-text=\"form.subject\"></option>\n                                    <template v-for=\"subject in subjects\">\n                                        <option v-if=\"form.subject_id !== subject.id\" :key=\"subject.id\" :value=\"subject.id\">\n                                            {{ subject.name }}\n                                        </option>\n                                    </template>    \n                                </select>\n                                <div v-if=\"messageErrors.subject\" class=\"mt-2 text-danger\">{{ messageErrors.subject[0] }}</div>\n                            </div>\n\n                            <div class=\"form-group\">\n                                <label for=\"description\">Description</label>\n                                <textarea v-model=\"form.description\" name=\"description\" id=\"description\" rows=\"5\" class=\"form-control\"></textarea>    \n                                <div v-if=\"messageErrors.description\" class=\"mt-2 text-danger\">{{ messageErrors.description[0] }}</div>\n                            </div> \n\n                            <button class=\"btn btn-primary d-flex align-items-center\" type=\"submit\">\n                                Update\n                                <template v-if=\"loading\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"margin: auto; background: none; display: block; shape-rendering: auto;\" width=\"30px\" height=\"20px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\"> <rect x=\"17.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#e3e5ea\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"18;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.2s\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"64;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.2s\"></animate> </rect> <rect x=\"42.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#cfdbf2\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"20.999999999999996;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.1s\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"58.00000000000001;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\" begin=\"-0.1s\"></animate> </rect> <rect x=\"67.5\" y=\"30\" width=\"15\" height=\"40\" fill=\"#cde0ff\"> <animate attributeName=\"y\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"20.999999999999996;30;30\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\"></animate> <animate attributeName=\"height\" repeatCount=\"indefinite\" dur=\"1s\" calcMode=\"spline\" keyTimes=\"0;0.5;1\" values=\"58.00000000000001;40;40\" keySplines=\"0 0.5 0.5 1;0 0.5 0.5 1\"></animate> </rect> </svg>\n                                </template>\n                            </button>\n                        </form>  \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    data () {\n        return {\n            form: [],\n            subjects: [],\n            messageErrors: [],\n            selected: '',\n            loading: false\n        }\n    },\n\n    mounted () {\n        this.getSubjects()\n        this.getNote()\n    },\n\n    methods: {\n        async getSubjects() {\n            let response = await axios.get('/api/subjects')\n            if (response.status == 200) {\n                this.subjects = response.data\n            }\n        },\n\n        async getNote() {\n            let response = await axios.get(`/api/notes/${this.$route.params.noteSlug}`)\n            this.form = response.data.data\n        },\n\n        selectedSubject(e) {\n            this.selected = e.target.value\n        },\n\n        async update() {\n            this.loading = true\n            this.form['subject'] = this.selected || this.form.subject_id\n            try {\n                let response = await axios.patch(`/api/notes/${this.$route.params.noteSlug}/edit`, this.form)\n                if (response.status == 200) {\n                    this.$toasted.show(response.data.message, {\n                        type: 'success',\n                        duration: 3000\n                    })\n                    this.loading = false\n                this.$router.push('/notes/table')\n                }\n            } catch(e) {\n                this.loading = false\n                this.messageErrors = e.response.data.errors\n            }\n        }\n    }\n}\n</script>"]}]}